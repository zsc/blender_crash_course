<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="./">
    <title>第14章：物理模拟与动力学</title>
    <link rel="stylesheet" href="assets/style.css">
    <link rel="stylesheet" href="assets/highlight.css">
    <script src="assets/script.js" defer></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$']],
                displayMath: [['$$', '$$']],
                processEscapes: false,
                packages: {'[+]': ['noerrors', 'ams']}
            },
            options: {
                ignoreHtmlClass: 'tex2jax_ignore',
                processHtmlClass: 'tex2jax_process'
            },
            loader: {
                load: ['[tex]/noerrors', '[tex]/ams']
            }
        };
    </script>
</head>
<body>
    <div class="container">
        <nav id="sidebar" class="sidebar">
            <div class="sidebar-header">
                <h3>目录</h3>
                <button id="sidebar-toggle" class="sidebar-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
            <div class="sidebar-search">
                <input type="text" id="sidebar-search-input" placeholder="搜索..." autocomplete="off">
            </div>
            <div id="tree-container">
                <nav class="tree-nav" role="tree">
                    <div class="tree-item " >
                        <a href="index.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Blender 速成教程</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter1.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第1章：Blender 界面与基础操作</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter2.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第2章：基础建模技术</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter3.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第3章：材质与纹理基础</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter4.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第4章：硬表面建模</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter5.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第5章：有机建模与雕刻</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter6.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第6章：场景构建与优化</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter7.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第7章：角色建模基础</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter8.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第8章：写实角色制作</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter9.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第9章：卡通角色制作</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter10.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第10章：动画基础</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter11.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第11章：骨骼绑定系统</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter12.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第12章：角色动画进阶</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter13.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第13章：打斗动画制作</span>
                        </a>
                    </div>
                
                    <div class="tree-item active" >
                        <a href="chapter14.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第14章：物理模拟与动力学</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter15.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第15章：灯光与渲染</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter16.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第16章：合成与后期处理</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter17.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第17章：科幻场景综合项目</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter18.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第18章：写实角色综合项目</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter19.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第19章：卡通短片综合项目</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter20.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第20章：动作场景综合项目</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="CLAUDE.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                </nav>
            </div>
        </nav>
        
        <main class="content">
            <article>
                <h1 id="14">第14章：物理模拟与动力学</h1>
<p>物理模拟是 Blender 中最强大的功能之一，它能够自动计算物体的运动、碰撞、变形等行为，让动画更加真实自然。本章将深入探讨 Blender 的各种物理系统，包括刚体、软体、布料、流体等模拟技术。通过学习这些工具，您将能够创建逼真的破坏效果、飘动的布料、流动的液体等复杂动画，大大提升作品的视觉冲击力。与传统的手动关键帧动画相比，物理模拟可以自动生成符合物理规律的运动，不仅节省时间，还能产生意想不到的自然效果。</p>
<h2 id="141">14.1 刚体模拟基础</h2>
<h3 id="1411">14.1.1 刚体物理原理</h3>
<p>刚体模拟用于模拟不会变形的硬质物体，如石块、木头、金属等。Blender 使用 Bullet 物理引擎进行刚体计算，能够精确模拟重力、碰撞、摩擦等物理现象。</p>
<div class="codehilite"><pre><span></span><code>刚体类型：
┌─────────────┬──────────────────────────┐
│   Active    │ 受物理影响，可以运动      │
│   Passive   │ 不受物理影响，作为障碍物   │
│   Animated  │ 通过关键帧控制，影响其他物体│
└─────────────┴──────────────────────────┘
</code></pre></div>

<h3 id="1412">14.1.2 设置刚体属性</h3>
<p>在物理属性面板中，可以调整刚体的各种参数：</p>
<p><strong>质量（Mass）</strong>：物体的重量，影响惯性和碰撞力度。较重的物体更难被推动，碰撞时产生更大的冲击力。</p>
<p><strong>摩擦力（Friction）</strong>：表面粗糙度，决定物体滑动的难易程度。冰面摩擦力接近0，橡胶摩擦力接近1。</p>
<p><strong>弹性（Bounciness）</strong>：碰撞后的反弹程度。0表示完全不反弹，1表示完全弹性碰撞。</p>
<p><strong>阻尼（Damping）</strong>：</p>
<ul>
<li>线性阻尼：减缓直线运动</li>
<li>角阻尼：减缓旋转运动</li>
</ul>
<h3 id="1413">14.1.3 碰撞形状优化</h3>
<p>选择合适的碰撞形状对性能至关重要：</p>
<div class="codehilite"><pre><span></span><code>碰撞形状复杂度（从简单到复杂）：
    Box → Sphere → Capsule → Convex Hull → Mesh

性能消耗：低 ────────────────────────────→ 高
精度：    低 ────────────────────────────→ 高
</code></pre></div>

<p><strong>优化策略</strong>：</p>
<ol>
<li>尽可能使用简单形状</li>
<li>复杂模型使用 Convex Hull</li>
<li>只在必要时使用 Mesh 碰撞</li>
<li>合理设置 Margin 值避免穿透</li>
</ol>
<h3 id="1414">14.1.4 刚体约束系统</h3>
<p>约束（Constraints）用于连接刚体，创建机械结构：</p>
<p><strong>固定约束（Fixed）</strong>：完全锁定两个物体的相对位置和旋转。</p>
<p><strong>点约束（Point）</strong>：允许物体围绕连接点自由旋转，类似球形关节。</p>
<p><strong>铰链约束（Hinge）</strong>：限制在一个轴上旋转，如门铰链。</p>
<p><strong>滑动约束（Slider）</strong>：沿一个轴滑动，如抽屉导轨。</p>
<p><strong>活塞约束（Piston）</strong>：结合旋转和滑动，如螺丝运动。</p>
<p><strong>通用约束（Generic）</strong>：提供六个自由度的完全控制。</p>
<h2 id="142">14.2 软体模拟系统</h2>
<h3 id="1421">14.2.1 软体变形原理</h3>
<p>软体模拟用于创建可变形的弹性物体，如橡胶、果冻、肌肉等。系统将物体视为由弹簧连接的质点系统：</p>
<div class="codehilite"><pre><span></span><code>软体结构示意：
    ●───●───●
    │ × │ × │    ● = 质点
    ●───●───●    ─ = 结构弹簧
    │ × │ × │    × = 剪切弹簧
    ●───●───●
</code></pre></div>

<h3 id="1422">14.2.2 软体参数设置</h3>
<p><strong>质量（Mass）</strong>：每个顶点的质量，影响整体重量分布。</p>
<p><strong>速度（Speed）</strong>：模拟计算的时间缩放，调整动画快慢。</p>
<p><strong>摩擦（Friction）</strong>：空气阻力，防止无限振荡。</p>
<p><strong>弹簧参数</strong>：</p>
<ul>
<li>Pull：拉伸刚度</li>
<li>Push：压缩刚度</li>
<li>Damp：弹簧阻尼</li>
<li>Plastic：塑性变形阈值</li>
<li>Bending：弯曲刚度</li>
</ul>
<h3 id="1423">14.2.3 目标形状控制</h3>
<p>使用 Goal 功能可以让软体部分保持原始形状：</p>
<p><strong>Goal Strength</strong>：目标强度，0-1之间，决定保持原形的力度。</p>
<p><strong>Goal Weight</strong>：通过顶点组控制不同部位的目标强度，实现局部软体效果。</p>
<p>应用场景：</p>
<ul>
<li>角色肌肉的局部变形</li>
<li>部分固定的软体结构</li>
<li>渐变刚度的物体</li>
</ul>
<h3 id="1424">14.2.4 软体碰撞设置</h3>
<p>软体的自碰撞和外部碰撞需要仔细调整：</p>
<p><strong>自碰撞（Self Collision）</strong>：</p>
<ul>
<li>Ball Size：碰撞球大小</li>
<li>Stiffness：碰撞刚度</li>
<li>Damping：碰撞阻尼</li>
</ul>
<p><strong>边缘碰撞（Edge Collision）</strong>：防止边缘穿透，特别适用于薄片状软体。</p>
<p><strong>面碰撞（Face Collision）</strong>：检测面与面的碰撞，计算量较大。</p>
<h2 id="143">14.3 布料模拟系统</h2>
<h3 id="1431">14.3.1 布料物理特性</h3>
<p>Blender 的布料系统专门优化用于织物模拟，支持各种材质特性：</p>
<div class="codehilite"><pre><span></span><code>常见布料预设参数：
┌──────────┬────────┬─────────┬─────────┐
│  材质     │ 密度   │ 刚度    │ 阻尼    │
├──────────┼────────┼─────────┼─────────┤
│ 棉布     │  0.3   │  15     │  5      │
│ 丝绸     │  0.1   │  5      │  2      │
│ 牛仔布   │  0.5   │  30     │  8      │
│ 皮革     │  0.8   │  50     │  15     │
│ 橡胶     │  1.0   │  80     │  25     │
└──────────┴────────┴─────────┴─────────┘
</code></pre></div>

<h3 id="1432">14.3.2 布料形状控制</h3>
<p><strong>缝合（Sewing）</strong>：模拟真实的缝制过程，将分离的布片连接成衣服。</p>
<p><strong>固定（Pinning）</strong>：通过顶点组固定布料的某些部分，如衣领、袖口。</p>
<p><strong>压力（Pressure）</strong>：模拟内部压力，用于充气物体如气球、枕头。</p>
<p><strong>收缩/增长（Shrinking/Growing）</strong>：动态改变布料尺寸，模拟收缩或膨胀效果。</p>
<h3 id="1433">14.3.3 布料碰撞优化</h3>
<p>布料碰撞是性能瓶颈，需要合理优化：</p>
<p><strong>质量细分（Quality Steps）</strong>：</p>
<ul>
<li>更高的步数提供更准确的模拟</li>
<li>建议值：5-10 用于预览，15-30 用于最终渲染</li>
</ul>
<p><strong>碰撞质量（Collision Quality）</strong>：</p>
<ul>
<li>Distance：碰撞检测距离</li>
<li>Impulse Clamping：限制碰撞冲量，防止爆炸</li>
</ul>
<p><strong>碰撞对象优化</strong>：</p>
<ol>
<li>使用简化的碰撞网格</li>
<li>增加 Thickness 避免穿透</li>
<li>合理设置 Friction 和 Damping</li>
</ol>
<h3 id="1434">14.3.4 高级布料技术</h3>
<p><strong>内部弹簧（Internal Springs）</strong>：创建更复杂的布料结构，如多层织物。</p>
<p><strong>动态网格（Dynamic Mesh）</strong>：运行时自适应细分，提高褶皱细节。</p>
<p><strong>力场交互（Force Field Interaction）</strong>：让布料响应风力、涡流等外部力场。</p>
<h2 id="144">14.4 流体与烟雾模拟</h2>
<h3 id="1441">14.4.1 流体域设置</h3>
<p>Mantaflow 是 Blender 的流体引擎，支持液体和气体模拟：</p>
<div class="codehilite"><pre><span></span><code>流体系统组成：
┌────────────────────────────┐
│         Domain             │
│  ┌──────┐  ┌──────────┐  │
│  │ Flow │→ │  Solver  │   │
│  └──────┘  └──────────┘   │
│  ┌──────────┐  ↓          │
│  │ Effector │  Output     │
│  └──────────┘              │
└────────────────────────────┘
</code></pre></div>

<p><strong>域（Domain）类型</strong>：</p>
<ul>
<li>Gas：烟雾、火焰模拟</li>
<li>Liquid：水、油等液体</li>
<li>分辨率划分：32-512，越高越精细</li>
</ul>
<h3 id="1442">14.4.2 流体源设置</h3>
<p><strong>流入（Inflow）</strong>：持续产生流体</p>
<ul>
<li>流量控制</li>
<li>温度差异</li>
<li>初始速度</li>
</ul>
<p><strong>流出（Outflow）</strong>：删除接触的流体</p>
<p><strong>几何体（Geometry）</strong>：使用物体形状作为初始流体</p>
<h3 id="1443">14.4.3 烟雾与火焰</h3>
<p>烟雾模拟的关键参数：</p>
<p><strong>浮力（Buoyancy）</strong>：</p>
<ul>
<li>密度差：冷热空气的上升下沉</li>
<li>温度差：火焰的上升速度</li>
<li>Alpha：烟雾透明度</li>
<li>Beta：温度扩散率</li>
</ul>
<p><strong>涡度（Vorticity）</strong>：增加湍流细节，让烟雾更真实。</p>
<p><strong>火焰设置</strong>：</p>
<ul>
<li>Reaction Speed：燃烧速度</li>
<li>Flame Smoke：火焰产生的烟雾量</li>
<li>Temperature：火焰温度，影响颜色和上升速度</li>
<li>Ignition：点火温度阈值</li>
</ul>
<h3 id="1444">14.4.4 液体表面细节</h3>
<p><strong>FLIP 粒子</strong>：</p>
<ul>
<li>用于跟踪液体表面</li>
<li>粒子半径影响细节程度</li>
<li>窄带宽度控制计算区域</li>
</ul>
<p><strong>网格生成</strong>：</p>
<ul>
<li>Upres Factor：上采样因子，提高表面细节</li>
<li>Particle Radius：影响表面平滑度</li>
<li>Concave Upper/Lower：控制凹面生成</li>
</ul>
<p><strong>泡沫与飞溅</strong>：</p>
<ul>
<li>Foam：泡沫粒子</li>
<li>Spray：飞溅水花</li>
<li>Bubble：气泡粒子</li>
</ul>
<h2 id="145">14.5 破碎效果制作</h2>
<h3 id="1451-cell-fracture">14.5.1 Cell Fracture 插件</h3>
<p>Cell Fracture 是 Blender 内置的破碎工具：</p>
<p><strong>破碎方式</strong>：</p>
<ol>
<li>点云分布：随机或自定义点</li>
<li>Voronoi 图：生成自然的碎片形状</li>
<li>递归细分：创建层次化破碎</li>
</ol>
<div class="codehilite"><pre><span></span><code>破碎层次示意：
原始物体 → 大碎片 → 中碎片 → 小碎片
  ■      →  ◆ ◆    → ▪▪ ▪▪ → ∙∙∙∙
         →  ◆ ◆    → ▪▪ ▪▪ → ∙∙∙∙
</code></pre></div>

<h3 id="1452">14.5.2 破碎参数优化</h3>
<p><strong>Source Limit</strong>：控制碎片数量，平衡细节和性能。</p>
<p><strong>Noise</strong>：添加随机性，让破碎更自然。</p>
<p><strong>Margin</strong>：碎片间距，防止初始相交。</p>
<p><strong>Material Index</strong>：为内部面指定不同材质。</p>
<h3 id="1453">14.5.3 动态破碎控制</h3>
<p><strong>阈值触发</strong>：</p>
<ul>
<li>速度阈值：当碰撞速度超过设定值时破碎</li>
<li>力量阈值：受力超过临界值触发</li>
<li>距离触发：靠近特定物体时破碎</li>
</ul>
<p><strong>级联破碎</strong>：</p>
<ol>
<li>初始冲击产生大碎片</li>
<li>大碎片继续破碎成中等碎片</li>
<li>根据能量递减逐级破碎</li>
</ol>
<h3 id="1454">14.5.4 碎片物理设置</h3>
<p><strong>质量分配</strong>：根据体积自动计算各碎片质量。</p>
<p><strong>约束强度</strong>：</p>
<ul>
<li>初始约束保持碎片连接</li>
<li>逐渐减弱或瞬间断裂</li>
<li>不同材质的断裂特性</li>
</ul>
<p><strong>碎片激活</strong>：</p>
<ul>
<li>Animated：破碎前作为整体</li>
<li>Active：破碎后独立运动</li>
<li>Deactivation：静止后停止计算</li>
</ul>
<h2 id="146">14.6 物理系统集成</h2>
<h3 id="1461">14.6.1 多系统协作</h3>
<p>Blender 允许多个物理系统同时工作：</p>
<p><strong>系统优先级</strong>：</p>
<ol>
<li>力场（Force Fields）：全局影响</li>
<li>刚体（Rigid Body）：硬质物体碰撞</li>
<li>软体（Soft Body）：弹性变形</li>
<li>布料（Cloth）：织物特性</li>
<li>流体（Fluid）：液体气体</li>
</ol>
<p><strong>交互矩阵</strong>：</p>
<div class="codehilite"><pre><span></span><code>         刚体  软体  布料  流体
刚体      ✓    ✓    ✓    ✓
软体      ✓    ✗    △    △
布料      ✓    △    ✗    ✓
流体      ✓    △    ✓    ✓

✓ = 完全支持  △ = 部分支持  ✗ = 不支持
</code></pre></div>

<h3 id="1462">14.6.2 缓存管理策略</h3>
<p>物理模拟依赖缓存系统存储计算结果：</p>
<p><strong>缓存类型</strong>：</p>
<ul>
<li>Memory Cache：内存缓存，快速但容量有限</li>
<li>Disk Cache：磁盘缓存，容量大但速度较慢</li>
</ul>
<p><strong>缓存工作流</strong>：</p>
<ol>
<li>Bake：完整计算并存储</li>
<li>Free：释放缓存重新计算</li>
<li>Current Cache to Bake：将预览转为最终</li>
<li>Bake All Dynamics：批量烘焙所有物理</li>
</ol>
<h3 id="1463">14.6.3 性能优化技巧</h3>
<p><strong>LOD 策略</strong>：</p>
<ul>
<li>远景使用简化碰撞体</li>
<li>近景使用完整物理</li>
<li>视野外暂停计算</li>
</ul>
<p><strong>时间步长优化</strong>：</p>
<div class="codehilite"><pre><span></span><code>场景类型        子步数  时间缩放
快速运动         20      1.0
正常运动         10      1.0
慢动作           5       0.1
超慢动作         2       0.01
</code></pre></div>

<p><strong>分层计算</strong>：</p>
<ol>
<li>主要物体高精度</li>
<li>次要物体中等精度</li>
<li>背景物体低精度或预烘焙</li>
</ol>
<h3 id="1464">14.6.4 调试与故障排除</h3>
<p><strong>常见问题诊断</strong>：</p>
<p>爆炸现象：</p>
<ul>
<li>降低时间步长</li>
<li>增加子步数</li>
<li>检查初始穿透</li>
</ul>
<p>穿透问题：</p>
<ul>
<li>增加碰撞 Margin</li>
<li>提高 Quality Steps</li>
<li>使用 Thickness</li>
</ul>
<p>不稳定振荡：</p>
<ul>
<li>增加阻尼</li>
<li>降低刚度</li>
<li>检查约束设置</li>
</ul>
<h2 id="_1">本章小结</h2>
<p>本章深入学习了 Blender 的物理模拟系统，掌握了从刚体碰撞到流体动力学的完整工作流程。主要知识点包括：</p>
<ol>
<li>
<p><strong>刚体系统</strong>：理解了 Active、Passive、Animated 三种刚体类型的区别，掌握了质量、摩擦、弹性等关键参数的设置方法，学会了使用约束系统创建机械结构。</p>
</li>
<li>
<p><strong>软体模拟</strong>：学习了弹簧质点系统的原理，掌握了 Goal 功能实现局部软体效果，理解了自碰撞和边缘碰撞的优化策略。</p>
</li>
<li>
<p><strong>布料系统</strong>：熟悉了不同织物材质的参数特征，掌握了缝合、固定、压力等高级控制技术，学会了碰撞优化提高性能。</p>
</li>
<li>
<p><strong>流体模拟</strong>：理解了 Mantaflow 引擎的工作原理，掌握了烟雾、火焰、液体的参数设置，学会了 FLIP 粒子和网格生成控制表面细节。</p>
</li>
<li>
<p><strong>破碎效果</strong>：掌握了 Cell Fracture 工具的使用，理解了 Voronoi 破碎原理，学会了动态破碎和级联破碎的实现方法。</p>
</li>
<li>
<p><strong>系统集成</strong>：理解了多物理系统的协作机制，掌握了缓存管理和性能优化策略，学会了常见问题的诊断和解决方法。</p>
</li>
</ol>
<p>物理模拟的核心是在真实感和性能之间找到平衡。记住：先用简单设置快速迭代，确定效果后再提高精度；合理使用缓存避免重复计算；多个物理系统配合使用可以创造出令人惊叹的效果。</p>
<h2 id="_2">练习题</h2>
<h3 id="_3">基础题</h3>
<p><strong>练习 14.1：刚体多米诺骨牌</strong>
创建一组多米诺骨牌（至少20个），设置合适的物理参数，实现连锁倒塌效果。</p>
<ul>
<li>Hint：注意调整摩擦力和质量，使用 Array Modifier 快速创建骨牌</li>
</ul>
<details>
<summary>参考答案</summary>
<ol>
<li>创建单个骨牌（缩放的立方体）</li>
<li>添加 Array Modifier，设置间距为骨牌高度的 0.7 倍</li>
<li>Apply Modifier 后分离为独立物体</li>
<li>全选添加 Rigid Body（Active）</li>
<li>设置参数：Mass=0.1, Friction=0.8, Bounciness=0.1</li>
<li>第一个骨牌添加关键帧动画触发倒塌</li>
<li>调整 Scene 的 Rigid Body World 的 Speed 控制速度</li>
</ol>
</details>
<p><strong>练习 14.2：弹力球落地</strong>
创建一个弹力球从 10 米高处落到地面，要求反弹至少 3 次，每次高度递减。</p>
<ul>
<li>Hint：关键在于 Bounciness 和 Damping 的平衡</li>
</ul>
<details>
<summary>参考答案</summary>
<ol>
<li>创建 UV Sphere 作为球体</li>
<li>创建 Plane 作为地面，添加 Rigid Body（Passive）</li>
<li>球体添加 Rigid Body（Active）</li>
<li>设置球体参数：
   - Mass = 1.0
   - Bounciness = 0.7（不要设为1避免永动）
   - Friction = 0.3
   - Linear Damping = 0.04
   - Angular Damping = 0.1</li>
<li>将球体移到 Z=10 位置</li>
<li>播放动画观察反弹效果</li>
</ol>
</details>
<p><strong>练习 14.3：简单布料悬挂</strong>
创建一块方形布料，固定两个顶角，模拟自然悬挂效果。</p>
<ul>
<li>Hint：使用 Vertex Group 和 Pinning 功能</li>
</ul>
<details>
<summary>参考答案</summary>
<ol>
<li>创建 Plane，细分 50x50</li>
<li>进入 Edit Mode，选择两个顶角顶点</li>
<li>创建 Vertex Group 命名为 "Pin"</li>
<li>添加 Cloth 修改器</li>
<li>Shape 面板中设置 Pin Group 为 "Pin"</li>
<li>使用 Cotton 预设作为基础</li>
<li>调整 Quality Steps = 10</li>
<li>播放动画查看悬挂效果</li>
</ol>
</details>
<p><strong>练习 14.4：烟雾上升效果</strong>
创建一个简单的烟雾从圆柱体顶部上升的效果。</p>
<ul>
<li>Hint：注意 Temperature Difference 和 Vorticity</li>
</ul>
<details>
<summary>参考答案</summary>
<ol>
<li>创建 Cube 作为 Domain，缩放至合适大小</li>
<li>添加 Fluid 修改器，Type = Gas，分辨率 = 64</li>
<li>创建 Cylinder 作为烟雾源</li>
<li>为 Cylinder 添加 Fluid 修改器，Type = Flow，Flow Type = Smoke</li>
<li>设置 Flow Source：
   - Surface Emission = 1.0
   - Temperature Difference = 2.0</li>
<li>Domain 设置：
   - Vorticity = 0.1
   - Buoyancy Density = 2.0</li>
<li>烘焙并查看效果</li>
</ol>
</details>
<h3 id="_4">挑战题</h3>
<p><strong>练习 14.5：链条摆动系统</strong>
创建一条由 10 个环组成的链条，顶端固定，底端挂一个重物，实现真实的摆动效果。</p>
<ul>
<li>Hint：使用 Rigid Body Constraints 连接各个环节</li>
</ul>
<details>
<summary>参考答案</summary>
<ol>
<li>创建 Torus 作为链环，复制 10 个</li>
<li>交错排列形成链条结构</li>
<li>所有链环添加 Rigid Body（Active），除了第一个设为 Animated</li>
<li>在每两个相邻链环之间添加 Empty</li>
<li>为 Empty 添加 Rigid Body Constraint（Point）</li>
<li>设置 Constraint 的两个目标为相邻链环</li>
<li>底部添加 Sphere 作为重物，Mass = 5.0</li>
<li>用 Constraint 连接最后一个链环和重物</li>
<li>给第一个链环添加旋转关键帧启动摆动</li>
<li>调整 Linear Damping = 0.02 模拟空气阻力</li>
</ol>
</details>
<p><strong>练习 14.6：衣服飘动动画</strong>
创建一个角色（可用简单圆柱体代替）穿着披风，在风中行走的动画。</p>
<ul>
<li>Hint：结合 Wind Force Field 和 Collision</li>
</ul>
<details>
<summary>参考答案</summary>
<ol>
<li>创建简化角色模型（圆柱体 + 球体）</li>
<li>创建披风：Plane 细分 80x80，放置在角色背后</li>
<li>选择披风顶部边缘顶点创建 Pin Group</li>
<li>添加 Cloth 修改器，设置 Silk 预设</li>
<li>角色添加 Collision 修改器</li>
<li>创建 Wind Force Field：
   - Strength = 500
   - Flow = 0.1
   - Noise = 0.5</li>
<li>为角色创建向前行走动画</li>
<li>调整披风参数：
   - Air Viscosity = 2.0
   - Quality Steps = 15</li>
<li>烘焙查看飘动效果</li>
</ol>
</details>
<p><strong>练习 14.7：玻璃破碎特效</strong>
创建一块玻璃被球体撞击后破碎的效果，要求碎片自然飞散。</p>
<ul>
<li>Hint：Cell Fracture + Rigid Body + 关键帧控制</li>
</ul>
<details>
<summary>参考答案</summary>
<ol>
<li>创建 Plane 作为玻璃，适当缩放</li>
<li>使用 Cell Fracture 插件：
   - Source Limit = 100
   - Noise = 0.25
   - Margin = 0.001</li>
<li>所有碎片添加 Rigid Body（Active）</li>
<li>创建 Sphere 作为撞击物，Rigid Body（Animated）</li>
<li>在碰撞前一帧：
   - 碎片设为 Animated
   - 使用 Rigid Body Constraints 连接碎片</li>
<li>碰撞时刻：
   - 碎片改为 Active
   - Constraints 设置 Breaking Threshold</li>
<li>球体参数：Mass = 10, 设置运动路径</li>
<li>添加 Gravity 和轻微的 Turbulence Field</li>
<li>调整碎片的 Linear/Angular Damping = 0.4</li>
</ol>
</details>
<p><strong>练习 14.8：水花四溅效果</strong>
创建一个物体落入水中产生水花的完整效果。</p>
<ul>
<li>Hint：FLIP 流体 + Obstacle + 二次粒子系统</li>
</ul>
<details>
<summary>参考答案</summary>
<ol>
<li>创建 Domain（大立方体），Fluid Type = Liquid</li>
<li>设置分辨率 = 128，FLIP Ratio = 0.95</li>
<li>创建水体：Domain 内部的立方体，Flow Type = Geometry</li>
<li>创建落体：Sphere，添加 Fluid（Effector）</li>
<li>为落体创建下落动画</li>
<li>Domain 粒子设置：
   - Generate Particles = Spray + Foam + Bubble
   - Particle Maximum = 10000
   - Threshold = 2.0</li>
<li>网格设置：
   - Mesh Upres Factor = 2
   - Particle Radius = 1.5</li>
<li>烘焙 Data 和 Mesh</li>
<li>为二次粒子创建材质：
   - Spray：小水滴
   - Foam：白色泡沫
   - Bubble：透明气泡</li>
<li>渲染设置运动模糊增强动感</li>
</ol>
</details>
<h2 id="_5">常见陷阱与错误</h2>
<h3 id="_6">刚体模拟陷阱</h3>
<ol>
<li>
<p><strong>初始穿透</strong>：物体在第一帧就相交会导致爆炸，始终检查初始位置。</p>
</li>
<li>
<p><strong>Scale 应用</strong>：忘记应用 Scale 会导致物理计算错误，Ctrl+A 应用变换。</p>
</li>
<li>
<p><strong>Origin 点位置</strong>：刚体以 Origin 为中心计算，错误的 Origin 导致奇怪旋转。</p>
</li>
</ol>
<h3 id="_7">布料模拟陷阱</h3>
<ol start="4">
<li>
<p><strong>顶点数过多</strong>：超过 10000 个顶点的布料计算极慢，使用 Decimate 优化。</p>
</li>
<li>
<p><strong>Self Collision 过度</strong>：不必要的自碰撞严重影响性能，简单布料可关闭。</p>
</li>
<li>
<p><strong>Pin Group 权重</strong>：权重不是 0 或 1 会导致拉伸，检查 Weight Paint。</p>
</li>
</ol>
<h3 id="_8">流体模拟陷阱</h3>
<ol start="7">
<li>
<p><strong>Domain 太小</strong>：流体超出 Domain 会消失，预留足够空间。</p>
</li>
<li>
<p><strong>分辨率误区</strong>：分辨率不是越高越好，128-256 对大多数场景足够。</p>
</li>
<li>
<p><strong>缓存覆盖</strong>：修改参数后忘记清除缓存，导致结果不更新。</p>
</li>
</ol>
<h3 id="_9">破碎效果陷阱</h3>
<ol start="10">
<li>
<p><strong>碎片数量失控</strong>：递归破碎容易产生数千碎片，设置合理上限。</p>
</li>
<li>
<p><strong>Margin 设置</strong>：过小导致碎片粘连，过大产生明显缝隙。</p>
</li>
<li>
<p><strong>约束强度</strong>：太强永不破碎，太弱立即散架，需要反复测试。</p>
</li>
</ol>
<h2 id="_10">最佳实践检查清单</h2>
<h3 id="_11">项目开始前</h3>
<ul>
<li>[ ] 确定场景单位和比例</li>
<li>[ ] 规划物理系统组合</li>
<li>[ ] 设置合理的帧率（24/30/60 fps）</li>
<li>[ ] 创建测试场景快速迭代</li>
<li>[ ] 备份原始模型</li>
</ul>
<h3 id="_12">建模阶段</h3>
<ul>
<li>[ ] 应用所有 Transform（Scale、Rotation）</li>
<li>[ ] 检查 Normal 方向</li>
<li>[ ] 设置正确的 Origin 点</li>
<li>[ ] 为碰撞创建简化版本</li>
<li>[ ] 合理控制多边形数量</li>
</ul>
<h3 id="_13">模拟设置</h3>
<ul>
<li>[ ] 从低分辨率开始测试</li>
<li>[ ] 逐步增加复杂度</li>
<li>[ ] 为不同系统设置优先级</li>
<li>[ ] 合理设置子步数</li>
<li>[ ] 使用预设作为起点</li>
</ul>
<h3 id="_14">优化阶段</h3>
<ul>
<li>[ ] 视野外物体暂停计算</li>
<li>[ ] 远景使用预烘焙</li>
<li>[ ] 简化碰撞形状</li>
<li>[ ] 合并相似材质的物体</li>
<li>[ ] 控制粒子数量上限</li>
</ul>
<h3 id="_15">缓存管理</h3>
<ul>
<li>[ ] 设置独立缓存文件夹</li>
<li>[ ] 定期清理旧缓存</li>
<li>[ ] 重要阶段备份缓存</li>
<li>[ ] 使用外部驱动器存储大缓存</li>
<li>[ ] 记录每次烘焙的参数</li>
</ul>
<h3 id="_16">渲染准备</h3>
<ul>
<li>[ ] 检查所有物理系统已烘焙</li>
<li>[ ] 设置运动模糊采样</li>
<li>[ ] 优化粒子渲染设置</li>
<li>[ ] 准备多层渲染用于合成</li>
<li>[ ] 最终质量检查</li>
</ul>
            </article>
            
            <nav class="page-nav"><a href="chapter13.html" class="nav-link prev">← 第13章：打斗动画制作</a><a href="chapter15.html" class="nav-link next">第15章：灯光与渲染 →</a></nav>
        </main>
    </div>
</body>
</html>